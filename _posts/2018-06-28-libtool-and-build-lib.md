---
title: 库编译加入系统目录
date: 2018-06-28 19:38:55 +0800
categories: dev
tags: gentoo build
---

## 问题说明

主要原因在于`gentoo`上安装`gumbo`这个lib，以前安装其它lib没有什么问题，但这个lib安装完再安装相关的ruby的package，却编译报错了。

关键错误就是头文件无法链接，我一开始还以为是这个库的问题，去github上的issue也查到了相关的，但是都是旧的，而且好像也修掉了。

找了好久问题在哪，甚至去各种平台上问，一直没有回复。

## 解决过程

很偶然，一次重新安装时，没有加上`emerge`的`-q`参数，即打印编译过程。在最后！！出现了！！warning!

因为之前一直是隐藏编译过程的，毕竟远程网络会有点慢。

## 修复方法

很简单。

```
libtool --finish /usr/lib64
```

`lib64`这个根据不同的系统更换。

## 思考

当存在编译相关问题时，如果多次失败后，考虑打开编译信息，warning也是很有用的。



